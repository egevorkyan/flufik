package badgerdb

import (
	//"github.com/egevorkyan/flufik/crypto"
	"fmt"
	"testing"
)

const b64 = `LS0tLS1CRUdJTiBQR1AgUFJJVkFURSBLRVkgQkxPQ0stLS0tLQpWZXJzaW9uOiBmbHVmaWstMC4xLTMKQ29tbWVudDogRmx1ZmlrIC0gVHlwZTogcnNhIDQwOTYgQml0cwoKeGNhR0JHSGhTdmdCRUFDa3pWT0Vmc1IrQkxWejdneFRsOWd2cURkMXkyTk9wNlNRQ1YzWGJjUGhlZFJCbUhmZApKWWJJdGdjSitlWS9LbVN4QUw0Z2ZPaGpTODcvTVI2WEF1UEhoUkswWWp0b1dueThHVldFVmhZVjBXMnNRWEZ2Ck1CeUlXRVUxZUwrUy9STGZLMlZpcTh1VmpCUkRkSWxoaHNQUEpydkpySXJiM0d5OFlXdlpwc21aZ2d4bEMvZWwKcGVTclNEOGFiYnROcGJaMnRxbVZXNFA0eml0WVY2N01mSmw2WGloZzhGNElzYy9vcFhhSGZzK3VxTUFLb1V5MApqQXF4ZE8ySnMvdm52b0s1dlF4Y0s5SVViQkZFemxTMExQVFlGTk1KSXYwVVJJbkxiZ1pPMERFYko3MThmTU01CkRmS216SEFxc0daL2tQYnFsSTNlbC9RVDZXc0tINVIvRUV0MWZQczNHakIxQlRGVVBPUWFiUHRSQVlFYkxOb2QKVVRYNm80NXI5TWJPTHFXcGFETXpTQ1dra1pCd2pRUTBWTFdId2J0aTlIOFN5SXpidXFMcWZvY3dJZUVyekQrNApFSzd1MUQ0dFdjaHNROWtrWHVuTktUakhPR2x0TEVOR090QVVGY0ZiNUwzaWlLSllmdHhoSXBvTzZzK3Q0VDFuCnRtOEVYN1FoZ0U2NzZrMUcrUFpENllsWVR1MHdXMHBhWEpLZWl2U0pCcHJXOGFHOTdUVENMSUp0cjk0My82QkoKdU93WWNpSk93WFJuRGlQc1VNaGhETHo3YVNhK0VOZmdpYjB5TWlISTNEK2w1RGU0SHhycmlGcmFBQ3RoRlJvWQpTRHlmRTIzZC9ubXhaS0w5SnBFNnA4cUZScFFBOTg5VHlKZXZjekd6MCtFRjM5L2dueXBpYnFZUDd3QVJBUUFCCi9na0RDTmEySG16RlJmTUVZRTRJcHVwM3ZrRzhHeXpGdXRRRmVjVGJTaFl0RWlNUCtzV3A5dm05WmFaN1JRNTYKdFREMU1DOEtLKzEzeEVJaXFEcTdZQUd3bFFxQXhGZSs4OG9EMUtJYVBpSkxLYVNYMjNKaCs4ZUxMQ1ZObm01TAp6cktTek9DQzBOdzdwbGJtOEhSU0dGM0o1TmRIUTRNcjhKVFFXNDZPajdidjFwMFVmNW5PYUM4NXp3L3dnTHRkCk54MVIvd3JBLzVEZ0RhTFJTK3ZESkRna1FETE1HTmZKWkdJOEtZL29sdXJUWmtFc3d1VS83Wi9NcllRVmxTUGYKUy84SitXRDBTdHdsTnpyN3NlZFJYLzZIa3dTV3FoMEErK3JmZmhEWTdjSUg1Rng1NWZDNkFVQ2hOeWF0TkI5awpsNjh2TlNiQU44eVJ1THYwTC9kQmJVSm5JS1ZIK1VqdUQ3bXZ6SDZvbjJjMHNvQWRYSVhlUDB0SU4wdEVyYXMxClV5NDBnVHhqc0NBVlIybXhrdHZ2bWtPRGNvOXI2SVpwdlFpaEN3M2hEdnQ1UmY3anI0QTBFNmZXTzh1QnVXV1EKdFdkRm1sc2t5ZzJkTnlhbFZvSmlWb1ZpKzB5ZnNsVVpwclZZT1Q2WmJGTWtWNVhLZUdLUEpxbGRzeUkzNlprSQpPdlgxVy83T3A5dkFOWnE3TzdjU3dZTitUZ3hrVk1BTDQreTFjTVA5LzlrQ3R5a1h2VVk4c0RHR3h5KzRPQjFICkY4NWF3cjFIL3FPMjMzRUxjU0dCb2tHZ0hIb0J3REtJSDNETDJ3ZXdJellYSlp5SHZRK2dhN0x2QkF0eEhleGQKMk5pakRadGVlS1pTV2hoa3pKRW1oZnZxcW1peFRtZlozL1NuU0lRL3dqcFBhOE9BeFlkMXBiRDVGNUtMR0Z1TQoxN2l3OUNKREY2R0tDZ09MK1dyODd6Z0N0dmhaZmhFQnYwV0FvT3FHeEIxWkQvSU1RZ2FZSkU3TnNQQkhNSVloCitHTlQwQlhXS0JRZnBhbG1WbER2SDlxKzFRK25oMit6cm91UTFVRy8yY2l1U01PRE90WFJ5TC80VklkYVI1SlMKbDRUWmZVVTc2NExoQTBUN3I5bDdVWlI0dTJVdjVYclU4V3k0NnM2NndkbmtCQVV4OW0yaGtIaW12UUFFUXVscApjRmpFN1VGTlFZQXNUS1FRd3NiMS9wWHBnd3ZseHh3TXRmdnVjM1VCMURsWVhaUnNuS1VreE5FZDRQaU5VeVhMCnRwVU83RjVDdTVtRndLU2pSWlJlN2x3VE90S0ZRT1ZDR096QmZ6VjBuejIxbkQ1VFRiUTU4QzRlTFY2d3lnOWYKRDRGNFRMVVZLNFp3elFmd1lYY1Qycm1TMGhFNWJBL0JjWCtiM3JpbEM0NTI0NWZTYVdnRndIRkRuSGF0RkpaLwpsc0ZMdUluM2Q0MjFET0l5R3phaTZGUzVvdmE4RVdmVEZsNU95a1UwdVBSNzRvMEZOV1dhUE9EazcwemtNV3lPCkJSdGFoUnZXMHNXTWxsUE9jTjhkMGY2UVdnK1NpQWt0R0dRcDhIRmxPVFpVRXhpNTErYU5wU0V4dE5UY0RxZVEKZ1FvVFBpOHFqUzl3VmVLd2RTaVFkSnBrSXAxbDhTS3hMWG81MEdRblJkS2ZvTk5rcTBFeGFEV1czQnRPUXBWKwpzcGtkZXhYYzBsdVRxdW55aWN6QzBNMTJuc2pnSHZUZnBTMjJvQUdYVFBuZVB0cExtZ0h2NWUyTVhUNG1KYjJRClVQWmM3bGh4SGs4aWlWYXBwRTJ2NFIzTXJiUFlQVXlBY3I4OW1ab3dBOFR5RFZiSzljOHZaMkQ3bmVKK1d1M1gKUFpvM1VmQm5leGZYWG83SnN3Zy9PSDkrazdQN2xpb2o5MjZqaHMyNHlOcmgvN1YydFRiWXAwK2ZSZWt0ZTZ5agp1SmE1ZTMzY1RJWkg1cEtNU0FzTStJb0xteGNqTm1VZ0ZHSm5QNUFaWkZjOFViTml3aXFsV2g4dXF4ZmttWEgyCmxUVUZsM2g1OVQ2dFhqK1BNd3c1UVpEdVNab21RUXVXaS9TN2xMSXNBQk5VSzlNR2VWWk55ejRkSmM1eHJpbi8KZXJDTGVtUzlhV1ZrMVVKYUlKaUYvbVAySi9pUFpEVzJ4ek14ekZUSDVad2U1TEVLQWtFeTRUN1p0M1FGdm1PZwpDNUVwdnZadm5JSjhSUGNXVStFdWZkMnZOT2lhdlJSelRnVXR5VTlyR3k0dUw4eTROSXozWlFNSWJrSVg5azJDCjI1S1RTRktic2tDZmF4NWxzZys2S2RzeUhwV21qUEtJeDI0VlQyNUE5em9tVGxzKzZtRko5RHZOSFhSbGMzUWcKUEdWblpYWnZjbXQ1WVc1QWIzVjBiRzl2YXk1amIyMCt3c0dHQkJNQkNBQTZCUUpoNFVyNENaRHc5ZitmMExzTAp6eGFoQklHTVpveGpQbzc0RHdZR25mRDEvNS9RdXd2UEFoc0RBaDRCQWhrQkF3c0pCd0lWQ0FJaUFRQUF2QTRQCi8za0RkTkEvemhMSno2NU9nNFFTVDNud0xFWFN1a21qd3VjVFZuZnNtWGVoMnY1Q3l0ekZzaDNFUjM5NXhPVzkKMy9lU2RwUUhxWkY2cjVOZHZNTjY4NDVtUDdCeUJFMTBTTk9OOEd1UDNLdWpRSTZidnRCT3NKeC94SlFCZ1Z6RwoyeGVjMWhEaHA5TWN6UlJRTnc0aE9nMWxTdUFkTmNkUTl1S2VmbVdtQ1FhdFJNS0d4NzI1Y1NRMnRpN3JoSEUyClBwQVZEY0tidTdPUXludytRZHhqZDhPbmJJV3RCMmpWazdCU05PL1FSN0wwS2pWQU1GZHNtYVovemEyTk55c0UKOFQzYVlCQ3ljRUdwa09xaWYxeEVQL1FMZlRBdVNVeEU0WnZwQ0RpWTY2VTRMeFcrbU5OTE0yeStVVTViZlBxaApPQXB5YTJ1Z3QwdUY2RUtOamZVaE9QSUFLT2NlZTRTWnhiV3N6U3pWNFpzWndFaXJucW1BOGNVdHErTDcrQmhlCm5tTjV1ZERLUzIxMWVFYlNGUzhKYXNRQXJUNSt3dGVGYTRxa3h3Q2phaDZ6Q2FxY0hRNGJLQUEwSGVmM3R1NGgKTjAvbkdvV2o4S05ZdzVZOEZaN1UwOUNjVnk0SlpLd2ZqdWpJOTZ5WFVPMlVBcmhuVFM3dlZabFZXZmliSW8vbgptQ2Nyb3RsMzVzSWZabmJocVRpOEMyMzl3cm95aHp1R1Vla2gzdjZacmdwRkRMYUdRRXJFMjZROEcwOHZYR1BHCnpsM0FKL01GRTF5T0JHL3dVTXltUGEwd3RXd3FSOFY3RVB6UStVZ3JoYWtDYlMwTWJST0lJb2JQcTZPVThYbWQKYXlCeklPYks5R0ZNTHpCNHlDQTMwSkd6YnIrVmJHZndURHhFZ3RwV2lMb3p4OGFHQkdIaFN2Z0JFQURLVGR2VQpKSjNZVS9oMmVtMnQrMHoxOUtsMExpYk5uSC8wSzR1VEtxOWd4NXVCYjgyampNWTVCM1R6R0ZEZmdtS1JJQVg0CkxVYjg0UnFWdG9GS0NSZlJmb0l4VUdsT0tFelRjbDV4eWJiMWRLdHB4Szc4U3JYVndtNCtBcTYrd1VaVXE1blgKYiszeSsweS9aaW5sNk5GbW9xSHJBNEhNNE11RWRMYkUxbW8rQzdhMWVOQkkrZW00SlN3K1VLK29nWEIvOEVrQwo4cEowRWdQNkszMzdHS0RlTng0Q2x6UzgrRDNUYXFmdlhRZ0UyV2RVMGFFTmJ5b3Z3NWFNY2JxanBCbEwxOWF5CnFrNjN2dWx2eFJNV2tYM0NqZVY3VHZ1SGYzalJleWtZZldxa1pPVGFlK1FnZ1lYVVZLSkQ3dDUwZlV0UVNKSTEKYmYzR0Z4MFkzenJ3Q0M4QUtreTc2M3dHMHVFcVpLZnlXd29WVGN4a2diSnpJZnJGdmxTOERlS2wva3Q3RkYwUQpuUWw0cEE1VHpnUlV6dGpZY0UzY0RvQm9QU1g4SjRHdzNsTk40MHJyM2cwUnBybmw1Smd3cFdRZGxOck0rR0VGClU5d3ZlYzFCYmRxd0xNTXc3Vld1WE5XTGlqRU5vSlZINTlNcitwSGRHVG9pRzFkVHJjK1ljSGo0L0dCekFXQ3UKNzRXa1V5bWI4aVU2aDRoWFBxMGJXWnFPU0YxZ2wrclo4Zy83OVRneUM4MUxOSWc2MzlkUks0ektHdnM1K2FaSwpGbmN4bmlzdGFVcUNYdm1pWVZlK0svVndNQUpYT3hUckhaUGdpODRmT1NZcjlMamdqS010WjNHSkp0SjVobE5XClYzQlFuRGVMUFVSNnNFQ2lmVkJPSzZxdEdOQVZvd0VGM3BleS93QVJBUUFCL2drRENJSW5UQ3RGSlJkSVlGaEoKY1JJTDNSYWlWQUt1YUpObjNvM1Z5L3JoN3dlOUdEaG9yZ1N4TC9zMG1KblVmd0srbWVuSjA0U2lobEFmVEpwUQpEbDBlWWZvOW03UkQycVZqS3lMY0JKejRpdG15S1FrazRNRldCRzFCMzc0YVQxeWVCaVVNMGUvS0pzZzBNN0JOCnY2bkJ2eGNKSVpQYVRRbi83Qy80OFpVSndHWVBoaVNTZFRwaUYrQzBBUkdWTnJpTnJ2ZytPbzlvdFYzeE5mQmIKV3J1aVFjMjVUZnJZQU9iTVZHOVE5RC9ML3Q5RlhNcEFKNTVMZjBPWVU1MUoxSUxXS2dLTmFYclcrYTZCSmYrVgpPbTNMdzM2VXlBMHM0ckxOaVQ2SkVPa0FrN3BjSTFLUDhZcEtCVXdLeHBTWEY0SWFpY3g0N2lPTy95Q2FaQ1ZUCkVuajJyblFoMXVMNC9uV3p6OUM4ZlhmbVNhVDEwRG80M01XTXZMa2kzZVlXWUp4L2JNK2gvWVU4Y2NUZTNuckMKa2xKNUY5NWxsZFgxaXhrWG1BMHgyejJPaGNlTUpucUhHa29Jend1dU5tK3grOHJYTzJWRjVXM3ZmYk9DNDY0Ygo1bjc4QUNnQXdWdFErdG1LanQxR2w0MEZoZ0R1aXZaRlAzN1p6M2RNWjFoeTU4YTBmY3Fid3ZnajFhK05RL2lqCitLdUhqdzdWenJNdFJqQzRnaEpEWWFrWEE3R29sTVY5RXJKS1NVYkRhVXNURTlSSnhyK0lRb2pkYXBzc3hHNFMKYUF5V1RXNzdOa3JqdGpUT2J5Z0VmN1hBVGpSMXR6bk85MmxvVkhnV2lyMXdPcTE5UUxSTy9CY1RoRGRoVlBDagpvbjU5elVpcmJiNXplUHIzcjBOS1NYdTgxaDE5cU1vRWZxRCtOT3B3VFUwNWprQ2o1WDhtT283Q1dmOXhTMmMrClpNZFpuUGU4SFhFK3FEdDBpNUt0bUZUbkZlZ25vdnZlZWpLcVdKM05nMEJGa0VzSk41cERxVWFLMTM2MXZoS0UKOERIMklrR0k5TDFBaTlaelhSZXhhZUY0OTRsNisvYXVITnFUelB1R3pjb0pUZUNqei8vWFVVV1dmMmhrSjY2ZAp3bnJXM0JPT2pHQmExd2J1aXZZTUFYb014d2FJdzRwUTIyNXRxbEM5S3ROL1d3UnVucm1OU3JCZXlocTIvaWozCjQ1RU5pM3NZTHErWW9uSkhhdlBERnZ2U2dHd0tkMVlVUnhWQkRSdnVqUytsem9sdlFMRktlTHVMb0p4U1cxQ2oKaWhnMk4rc3pCeXFWWURqdEhaK1o1aFVXOHBSanJ2M0dyM1czU3lsb1R1Z3NOb2JVc1hMaXNIVUtHOHorS0g3MgpMK3djamdObTU4QWpwZ25IRlcyTm1kc2V6RnNjUlg4cUlWSXA2NGp2RjI5bStzVGVIK0luTTNrdXh6RnY2RXBRCkxzeGp3NkdsOWNROC9hK1pBS3RYSTVCNUNRdGUrWG1IWEF4Q3EvK1Q5L2lRZDQyeWN6Y0d6c2VLNVIwT3Zsa1UKVW5ESHR4WXZkRnhDYVYweldFMHREaDJ4TEFyVndqN0VETFBrU2VXODF3WGNkbE0wYVh0U0xTOFE5WHdGMlQxdgo1ZEZOMlpXYTE3eXU1NWttTUpNRytnbUZCZG5VYUl3MWExWXpTc2ZBaXBJSE0rRFNwVG1FaUcxUVhEQk9UVVlsCjBuY0N3aFRZUmVodzQ5T1VXbE9FSjJ0a1pSNkErZ0NDbFBnNGVHQkR3cmVEdVRweTZROHdQSExGcTZxcm81SGsKdXJwY2R0NDJZUWoyVUlicmE4elM4OS8zeitzak9KSXljQytpN3hteVh4S1Q4ZHhFR0JmZmlCaWFsR0l3dDVKUwpvOUVxZDdWOFk4TGY2bnUyM2E1YU5ub2hHYU1iTzJPbCt6ZmVuQ096eHpOU0U4b1g3T0xQcG11VGc4cUxobmdjCkNqeVdzMTJOSUpsRVIyYkJRVmtCbCt4YkV4dU05VzNyUWl3NUxzNkZhaGxRR0lRclUweXY4aHBaWHM4VTU4UUQKTWFHMHJkL3o2Tk9oSXVET1dheTU2bHpzM3BHRnpMenhvdXp4aG1tR295a2VrUXlYd3l0OTZXZzE5MURoMGg3YgpjSUZuRWxYS0dWMzViVFNnRmQ2bkpxUTZ3TjZKRTJ1SU5mTkhtd1ZGNFpWa1Q3YU0yZWhxN3VVejZUellKZWk1CnJHQVpaWVVKTGQ1cXk4NC8wVDhTKzlyZnZkelVTUG1xcVRGS280bHZUZHlwYm9qN0h0SFA2bTI4ZG9iMFRXY3oKOUlhWEZlVFEyUU1PYnhVMmtaZnlQbmxubDYxbWh6OEVsMFRDd1hZRUdBRUlBQ29GQW1IaFN2Z0prUEQxLzUvUQp1d3ZQRnFFRWdZeG1qR00ranZnUEJnYWQ4UFgvbjlDN0M4OENHd3dBQVBhTUQvOWVHcG9pWERzSWlVOGZaOWdDCnNOVGEyMUMwcmFuaTZlY21razMvMm1uRnJnSm5VaEI1T3haZTF2eFVmd3R0OUcwSmRNMG05a2NBUVZPSVlGMisKNEg5cUI5eFJKMHByRHZWWU9BUXl6d3VsdG9GQXpXY1RUdjJhOGxwSTJqZytkRzFhYzdDejBTUVNOSlRvVFhKcgpGbjlldHFPVTNOT0ZBOVpmQzFFVy8vOCtIR1k0QTNFM1c1U3BNc0w2QmpBTndmbUVGY0J4SHhmakxYMkpoSW5oClBXOUt5OGo1L1hvQnNCN3RMWXNmRjBnVjk4WmFSZjh1djVudHdwRFZhWTkreW1SYTlnMGd1cE0wY2duZHM4S2gKRXNPTzltdHFNM3Y4dXhhM3JOWFFyeW9iWWM4RCtoa1FybWJKUkNNN21EZ29MaW85bVRobzcwa2xVTGw5Ti9SUQpQNVh4KzZLSlBDZ2dZRy92ZXpadFpFZTIzSnZjNGUxL1JHU1VWcUVGS0w0NDg1elR4SUJJREJpUUJDZHZNeHFUCnV1RjZQZVFSQWgxYjR1MnZuMW9WakdMSlNZQjdwUG81NWNPSnRLTGptdlBNczMyV2pQOFhveUJWTUlqQ3V5Sy8KZHkxY210YU80SW9wSldUSzdaZUE5ZUU4a2R1VWRsZ3ZkdHYxdCs4RllzQzRqWXh6U01LMVI0czBrTWJGSjZPZwpqRzNhMC94cVA0MG1JYWtGbVRZRlBKSU1VNWZUZGNUbUpKRDZrcG1UWUw4RmJRMTVpU3UveUdtV3BsZmRzNlFlCjB0YmRKc1RQdEZBZzAydkdJR0M4UE5jVUNMNGIvWUpZZVlieUVoQVNnZmV6ZkUxR2lvK0lldmxUZm1iSkVCSXkKWG1BdWNlT2JDMHM5TkZQYUMxbnUzdWpGdGc9PQo9R1BITQotLS0tLUVORCBQR1AgUFJJVkFURSBLRVkgQkxPQ0stLS0tLQ==`

func TestFlufikBadger_UpdateDb(t *testing.T) {
	var kv = make(map[string]string)
	kv["demo_priv"] = b64
	kv["demo_pub"] = "test"
	kv["demo_pwd"] = "demo"
	db := NewFlufikBadgerDB("test")
	if err := db.UpdateDb(kv); err != nil {
		t.Fatal(err)
	}
}

func TestFlufikBadger_Get(t *testing.T) {
	var buffer [][]byte
	data := []string{"demo_priv", "demo_pub", "demo_pwd"}
	db := NewFlufikBadgerDB("test")
	for _, d := range data {
		temp, err := db.Get(d)
		if err != nil {
			t.Fatal(err)
		}
		buffer = append(buffer, temp)
	}
	for _, b := range buffer {
		fmt.Println(string(b))
	}
	defer db.badgerDB.Close()

}
